# memcached性能基线报告

memcached服务器端运行：

```shell
/usr/bin/memcached  -d -m 8192-u root -l 11.0.0.139 -p 11211 -c 1024 -P /tmp/memcached.pid

## 参数
## -l 监听地址，memcache 无身份验证功能，严禁在无防护情况下使用
## -d 以守护进程的形式运行
## -m 指定分配内存大小，单位 m，为了减小错误率，设置为8G
## -p 监听端口
## -u 运行用户
## -c 最大并发连接数
## -P PID 文件存放位置
## -f 增长因子
```



测试端：

```shell
/usr/local/libmemcached/bin/memaslap -s 11.0.0.139:11211 -t 60s -T 4 -c 512

## 运行时间60s
## 4线程
## 并发量512
## 其余参数，除了get/set比例均为默认值
## 受限于网络IO，此时已达性能瓶颈（性能瓶颈分析见文档5）；
```

在不同的时间段测试 get:set 命令比例分别为0:10, 5:5, 10:0时的性能数据，每种比例分别测试三次（不取修改参数后的第一次结果）得到有效结果如下：

### set:get = 0:10
![输入图片说明](https://images.gitee.com/uploads/images/2021/0731/162111_ef122b04_5224942.png "010.png")

各项数据波动均在5%以内。

### set:get = 10:0
![输入图片说明](https://images.gitee.com/uploads/images/2021/0731/163128_3275e8fa_5224942.png "100.png")

各项数据波动均在5%以内。

### set:get = 5:5
![输入图片说明](https://images.gitee.com/uploads/images/2021/0731/155105_9d5c038e_5224942.png "55.png")

各项数据波动均在5%以内。

### 平均结果
| get:set比例   | 0：10      | 5：5       | 10：0      |
| :------------ | ---------- | ---------- | ---------- |
| get_misses    | 0          | 0          | 1045k     |
| TPS(次/s)     | 106K       | 107K       | 189K      |
| Net_rate(M/s) | 113        | 117        | 189       |

性能测试指标已TPS为主。