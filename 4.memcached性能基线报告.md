# memcached性能基线报告

memcached服务器端运行：

```shell
/usr/bin/memcached  -d -m 1024 -u root -l 11.0.0.139 -p 11211 -c 1024 -P /tmp/memcached.pid

## 参数
## -l 监听地址，memcache 无身份验证功能，严禁在无防护情况下使用
## -d 以守护进程的形式运行
## -m 指定分配内存大小，单位 m
## -p 监听端口
## -u 运行用户
## -c 最大并发连接数
## -P PID 文件存放位置
## -f 增长因子
```



测试端：

```shell
/usr/local/libmemcached/bin/memaslap -s 11.0.0.139:11211 -t 60s -T 4 -c 64

## 运行时间60s
## 4线程
## 并发量64
## 其余参数，除了get/set比例均为默认值!
```

在不同的时间段测试 get:set 命令比例分别为0:10, 5:5, 10:0时的性能数据，每种比例分别测试四次（不取修改参数后的第一次结果）得到有效结果如下：

### set:get = 0:10
![set:get = 0:10](https://images.gitee.com/uploads/images/2021/0718/202418_38345f1f_5224942.png "0比10.png")
各项数据波动均在5%以内。

### set:get = 10:0
![set:get = 10:0](https://images.gitee.com/uploads/images/2021/0718/202108_2ed73604_5224942.png "10比0.png")
各项数据波动均在5%以内。

### set:get = 5:5
![set:get = 5:5](https://images.gitee.com/uploads/images/2021/0718/202222_5ee63089_5224942.png "5比5.png")
各项数据波动均在5%以内。

### 平均结果
| get:set比例   | 0：10      | 5：5       | 10：0      |
| :------------ | ---------- | ---------- | ---------- |
| cmd_get       | 0          | 2.79M      | 5516K      |
| cmd_set       | 5565K      | 2.79M      | 655.3K     |
| get_misses    | 0          | 221.1K     | 948.9k     |
| written_bytes | 6149M      | 3277M      | 110.9M     |
| read_bytes    | 44.51M     | 2874M      | 508.0M     |
| object_bytes  | 6054M      | 3035M      | 713.0M     |
| Ops(次)       | 5564K      | 5589K      | 6172K      |
| TPS(次/s)     | 92.74K     | 92.99K     | 102.8K     |
| Net_rate(M/s) | 98.4       | 97.8       | 98.3       |

