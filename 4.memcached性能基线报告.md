# memcached性能基线报告

memcached服务器端运行：

```shell
/usr/bin/memcached  -d -m 1024 -u root -l 11.0.0.139 -p 11211 -c 1024 -P /tmp/memcached.pid

## 参数
## -l 监听地址，memcache 无身份验证功能，严禁在无防护情况下使用
## -d 以守护进程的形式运行
## -m 指定分配内存大小，单位 m
## -p 监听端口
## -u 运行用户
## -c 最大并发连接数
## -P PID 文件存放位置
## -f 增长因子
```



测试端：

```shell
/usr/local/libmemcached/bin/memaslap -s 11.0.0.139:11211 -t 60s -T 4 -c 64

## 运行时间60s
## 4线程
## 并发量64
## 其余参数，除了get/set比例均为默认值!
```

分别测试Get:Set命令比例10:0, 5:5, 0:10时的数据，得到结果如下：

![0-10](https://images.gitee.com/uploads/images/2021/0715/134505_17afd653_5224942.png "0-10.png")

![5-5](https://images.gitee.com/uploads/images/2021/0715/134519_9f0459c6_5224942.png "5-5.png")

![10-0](https://images.gitee.com/uploads/images/2021/0715/134535_bad9fb16_5224942.png "10-0.png")

| Get:Set比例   | 10：0      | 5：5       | 0：10      |
| :------------ | ---------- | ---------- | ---------- |
| cmd_get       | 5609428    | 2786000    | 0          |
| cmd_set       | 655360     | 2786030    | 5628541    |
| get_misses    | 966188     | 216663     | 0          |
| written_bytes | 1116828280 | 3273547620 | 6219467085 |
| read_bytes    | 5163999180 | 2875297645 | 45027816   |
| object_bytes  | 713031680  | 3031200640 | 6123852608 |
| Ops(次)       | 6264788    | 5572030    | 5628541    |
| TPS(次/s)     | 104405     | 92860      | 93801      |
| Net_rate(M/s) | 99.8       | 97.7       | 99.6       |

